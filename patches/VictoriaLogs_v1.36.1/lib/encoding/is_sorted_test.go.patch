diff --git a/lib/encoding/is_sorted_test.go b/lib/encoding/is_sorted_test.go
new file mode 100644
index 000000000..952a0f4f6
--- /dev/null
+++ b/lib/encoding/is_sorted_test.go
@@ -0,0 +1,31 @@
+package encoding
+
+import (
+	"testing"
+)
+
+func TestIsInt64ArraySorted(t *testing.T) {
+	f := func(a []int64, expect bool) {
+		if IsInt64ArraySorted(a) != expect {
+			t.Errorf("%+v should be %v", a, expect)
+		}
+	}
+	f([]int64{1, 2, 3, 4, 6, 7, 8, 9, 9}, true)
+	f([]int64{}, true)
+	f([]int64{1}, true)
+	f([]int64{1, 2}, true)
+	f([]int64{1, 3}, true)
+	f([]int64{1, 2, 3, 4}, true)
+	f([]int64{1, 2, 3, 4, 5}, true)
+	f([]int64{1, 2, 3, 4, 4}, true)
+	f([]int64{1, 2, 3, 4, -1}, false)
+	f([]int64{1, 2, 3, 4, 6}, true)
+	f([]int64{1, 2, 3, 4, 6, 7, 8}, true)
+	f([]int64{1, 2, 3, 4, 6, 7, -1}, false)
+	f([]int64{1, 2, 3, 4, 6, 7, 8, 9}, true)
+	f([]int64{1, 2, 3, 4, 6, 7, 8, -2}, false)
+
+	f([]int64{1, 2, 3, 4, 6, 7, 8, 9, 9, 8}, false)
+	f([]int64{-4, -3, -2, -1, 0, 1, 2, 3, 4, 6, 7, 8, 9, 9}, true)
+	f([]int64{-4, -3, -2, -1, 0, 1, 0, 2, 3, 4, 6, 7, 8, 9, 9}, false)
+}
